<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>View Users</title>
    <style>
      :root{--bg:#f5f7fb}
      body{font-family:Segoe UI,Roboto,Arial;margin:0;background:var(--bg);min-height:100vh}
      .wrap{max-width:1100px;margin:28px auto;padding:0 20px}
      header{display:flex;justify-content:space-between;align-items:center}
      table{width:100%;border-collapse:collapse;margin-top:12px;background:#fff;border-radius:8px;overflow:hidden}
      th,td{padding:10px;border-bottom:1px solid #f1f5f9;text-align:left}
      th{background:#fafafa}
      .actions{display:flex;gap:8px}
      button.danger{background:#ef4444;color:#fff;border:0;padding:6px 10px;border-radius:6px;cursor:pointer}
      .small{color:#6b7280;font-size:13px}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div>
          <h2>Users</h2>
          <div class="small">Registered users</div>
        </div>
        <div><a href="dashboard.html">‚Üê Back to dashboard</a></div>
      </header>

      <section>
        <table id="tbl">
          <thead><tr><th>Username</th><th>Actions</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>
    </div>

    <script>
      function loadUsers(){ try{ return JSON.parse(localStorage.getItem('users')||'[]'); }catch(e){return []} }
      function saveUsers(list){ localStorage.setItem('users', JSON.stringify(list)); }
      function addLog(msg){ const logs = JSON.parse(localStorage.getItem('logs')||'[]'); logs.push({ts: new Date().toISOString(), msg}); localStorage.setItem('logs', JSON.stringify(logs)); }

      const tbody = document.querySelector('#tbl tbody');
      function render(){
        const users = loadUsers();
        tbody.innerHTML = '';
        if (!users.length){ tbody.innerHTML = '<tr><td colspan="2" class="small">No users found.</td></tr>'; return; }
        users.slice().reverse().forEach(u=>{
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${u.username}</td><td><div class="actions"><button data-del="${u.username}" class="danger">Delete</button></div></td>`;
          tbody.appendChild(tr);
        });
      }

      tbody.addEventListener('click', (e)=>{
        const del = e.target.getAttribute('data-del');
        if (!del) return;
        if (!confirm('Delete user ' + del + '?')) return;
        let users = loadUsers(); users = users.filter(u=>u.username !== del); saveUsers(users); addLog('Deleted user ' + del); render();
      });

      render();
    </script>
  </body>
</html>
